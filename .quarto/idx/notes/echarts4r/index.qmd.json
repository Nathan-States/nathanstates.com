{"title":"echarts4r Cookbook","markdown":{"yaml":{"title":"echarts4r Cookbook","description":"Notes on Apache ECharts for R","author":"Nathan States","date":"01/10/2023","format":{"html":{"toc":true,"toc-location":"right"}}},"headingText":"0. Intro Thoughts","containsRefs":false,"markdown":"\n\n\nThere's a ton of different charting libraries in `R`, with a few of them being interactive. `plotly` is one of the most popular, having over 2.3k stars on GitHub. `highcharter` is another such package. With `ggiraph`, it's possible to turn `ggplot2` objects into interactive charts, so there's quite a selection of tools to choose from. \n\nPersonally, I find `echarts4r` to be the best out of all of them **specifically** for exploratory data analysis. The charts are easy to create, they look nice out of the box, and it's quick and easy to gain insight into your data. The interactive element makes identifying outliers or other specific values very easy. Compared to other packages, `plotly` is way too ugly, `highcharter` requires a license for paid applications, and `ggiraph` is too time consuming for regular charts. `echarts4r` offers a nice solution to all these problems (though if you need a deeper statistical breakdown, I'd recommend `ggstatsplot`).\n\nThere is a noticeable limit on customization, though. I'd still recommend `ggplot2` for high quality static charts, and D3 for more advanced interactive ones. \n\n`echarts4r` is a wrapper for the JS library developed by Apache Software Foundation, meaning changes in the original code will cause changes in this package, regardless of if `echarts4r` itself is updated. Apache ECharts is listed as one of Apache's top projects, so hopefully, we see even more improvements in the future. \n\n![](thumbnail.png)\n\n# 1. Installation \n\n## 1.A. Stable Install \n\n[Github Page](https://www.google.com/search?client=firefox-b-1-d&q=echarts4r+github+).\n\n```{r}\n#| eval: false\ninstall.packages(\"echarts4r\")\n```\n\n## 1.B. Developmental Build \n\nRequites the `remotes` package to install. \n\n```{r}\n#| eval: false\ninstall.packages(\"remotes\")\nremotes::install_github(\"JohnCoene/echarts4r\")\n```\n\n## 1.C. Complimentary Packages \n\nNeither of these packages have been updated in years, but are still usable in their current formats. They allow for maps and image assets to be used while charting. \n\n```{r}\n#| eval: false\nremotes::install_github('JohnCoene/echarts4r.assets')\nremotes::install_github('JohnCoene/echarts4r.maps')\n```\n\n## 1.D. Loading Packages \n\nAlso loading `dplyr` for data manipulation and `palmerpenguins` for dummy data. \n\n```{r}\nlibrary(dplyr)\nlibrary(palmerpenguins)\nlibrary(echarts4r)\nlibrary(echarts4r.maps)\n\ne_common(\n  font_family = \"Georgia\",\n  theme = \"dark-mushroom\"\n)\n```\n\n# 2. Basic Charts \n\n## 2.A. Column  \n\n```{r}\npenguins |>\n  group_by(island) |>\n  summarise(average_mass = mean(body_mass_g, na.rm = TRUE)) |>\n  e_chart(island) |>\n  e_bar(average_mass) |>\n  e_tooltip(trigger = \" axis\")\n```\n\n## 2.B. Bar Chart \n\n```{r}\npenguins |>\n  group_by(island) |>\n  summarise(average_mass = mean(body_mass_g, na.rm = TRUE)) |>\n  e_chart(island) |>\n  e_bar(average_mass) |>\n  e_flip_coords() |> # THIS LINE OF CODE # \n  e_tooltip()\n```\n\n## 2.C. Scatter Chart \n\n```{r}\npenguins |>\n  group_by(species) |>\n  e_chart(bill_length_mm) |>\n  e_scatter(bill_depth_mm) |>\n  e_tooltip()\n```\n\n## 2. . Heatmap \n\n## 2. . Candlestick \n\n## 2. . Treemap \n\n## 2. . Calendars \n\n```{r}\ndates <- seq.Date(as.Date(\"2017-01-01\"), as.Date(\"2018-12-31\"), by = \"day\")\nvalues <- rnorm(length(dates), 20, 6)\n\nyear <- data.frame(date = dates, values = values)\n\nyear |> \n  e_charts(date) |> \n  e_calendar(range = \"2018\") |> \n  e_heatmap(values, coord_system = \"calendar\") |> \n  e_visual_map(max = 30) |> \n  e_title(\"Calendar\", \"Heatmap\") |>\n  e_tooltip()\n```\n\nWhen charting by multiple years, call `e_calendar` again and group by year. \n\n```{r}\nyear |> \n  dplyr::mutate(year = format(date, \"%Y\")) |>\n  group_by(year) |> \n  e_charts(date) |> \n  e_calendar(range = \"2017\",top=\"40\") |> \n  e_calendar(range = \"2018\",top=\"260\") |> \n  e_heatmap(values, coord_system = \"calendar\") |> \n  e_visual_map(max = 30) |> \n  e_title(\"Calendar\", \"Heatmap\")|>\n  e_tooltip(\"item\") \n```\n\n## 2.J. Pie / Donut Chart\n\nNo.\n\n# 3. Theme Customizations \n\n## 3.A. Set Common Theme \n\nSet theme for all charts on the page and set font. \n\n```{r}\n#| eval: false\ne_common(\n  theme = \"my-theme\",\n  font_family = \"my-font\"\n)\n```\n\n## 3.B. Tooltip Theme \n\nI always customize the tooltip to get rid of the ugly border and the white background. \n\n```{r}\npenguins |>\n  group_by(island) |>\n  summarise(average_mass = mean(body_mass_g, na.rm = TRUE)) |>\n  e_chart(island) |>\n  e_bar(average_mass) |>\n  e_legend(show = FALSE) |>\n  e_axis_labels(\n    x = \"Island\",\n    y = \"Averge Mass\"\n  ) |>\n  e_title(\n    text = \"Some meaningful title.\"\n  ) |>\n  e_tooltip(\n    trigger = \" axis\",\n    backgroundColor = \"rgba(40, 40, 40, 0.75)\",\n    borderColor = \"rgba(0, 0, 0, 0)\",\n    textStyle = list(\n      color = \"#fcfcff\"\n    )\n  )\n```\n\n## 3.C. Remove Legend \n\n```{r}\npenguins |>\n  group_by(island) |>\n  summarise(average_mass = mean(body_mass_g, na.rm = TRUE)) |>\n  e_chart(island) |>\n  e_bar(average_mass) |>\n  e_legend(show = FALSE) |>\n  e_axis_labels(\n    x = \"Island\",\n    y = \"Averge Mass\"\n  ) |>\n  e_legend(show = FALSE) |> # THIS LINE OF CODE # \n  e_title(\n    text = \"Some meaningful title.\"\n  ) |>\n  e_tooltip(trigger = \" axis\")\n```\n\n\n\n# 4. Tooltips \n\n## 3.C. Default Tooltip Formatter \n\nOne of the arguments in `e_tooltip` is **formatter**. There are three different types of default formats that make it easy to display tooltips nicer:\n\n```{r}\n#| eval: false\nmy_echart |>\n  e_tooltip(\n    formatter = e_tooltip_pointer_formatter(style = \"percent\"),\n    # OR #\n    formatter = e_tooltip_pointer_formatter(style = \"percent\"),\n    # OR #\n    formatter = e_tooltip_pointer_formatter(style = \"percent\"),\n  )\n```\n\n\n\n```{r}\n\n```\n\n# 5. Maps \n\n\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../assets/styles.css"],"highlight-style":{"light":"../../assets/syntax-light.theme","dark":"../../assets/syntax-dark.theme"},"toc":true,"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","editor":"source","theme":{"light":"../../assets/states-light.scss","dark":"../../assets/states-dark.scss"},"smooth-scroll":true,"code-block-border-left":true,"title":"echarts4r Cookbook","description":"Notes on Apache ECharts for R","author":"Nathan States","date":"01/10/2023","toc-location":"right"},"extensions":{"book":{"multiFile":true}}}}}